<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tutoriels ROS2 </title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>Tutoriels ROS2 </h1>
    </header>
    
    <button id="menu-button">Menu</button>
    <nav>
        <a href="/ROS2/index.html">Home</a>
        <a href="/ROS2/tuto_installation_ros2.html">Installation de ROS2</a>
        <a href="/ROS2/tuto_installation_prerequis_matlab.html">Installation des prérequis à l'utilisation de Matlab avec ROS2</a>
        <a href="/ROS2/tuto_1_noeuds_topics_services_actions.html" class="active">Noeuds, Topics, Services et Actions</a>
        <a href="/ROS2/tuto_2_packages_python_cpp.html">Création de packages Python et C++</a>
        <a href="/ROS2/tuto_3_ros_domain_id.html">Comprendre les ROS_DOMAIN_ID</a>
        <a href="/ROS2/tuto_4_ros2_matlab.html">Utiliser Matlab avec ROS2</a>
        <a href="/ROS2/tuto_5_micro-ros.html">Micro-ROS</a>
        <a href="/ROS2/tuto_6_turtlebot3.html">TurtleBot3</a>
        <a href="/ROS2/contact.html">Contact</a>
        <!-- Ajoutez d'autres liens pour chaque tutoriel -->
    </nav>

    <div id="menu-dropdown">
        <a href="/ROS2/index.html">Home</a>
        <a href="/ROS2/tuto_installation_ros2.html">Installation de ROS2</a>
        <a href="/ROS2/tuto_installation_prerequis_matlab.html">Installation des prérequis à l'utilisation de Matlab avec ROS2</a>
        <a href="/ROS2/tuto_1_noeuds_topics_services_actions.html" class="active">Noeuds, Topics, Services et Actions</a>
        <a href="/ROS2/tuto_2_packages_python_cpp.html">Création de packages Python et C++</a>
        <a href="/ROS2/tuto_3_ros_domain_id.html">Comprendre les ROS_DOMAIN_ID</a>
        <a href="/ROS2/tuto_4_ros2_matlab.html">Utiliser Matlab avec ROS2</a>
        <a href="/ROS2/tuto_5_micro-ros.html">Micro-ROS</a>
        <a href="/ROS2/tuto_6_turtlebot3.html">TurtleBot3</a>
        <a href="/ROS2/contact.html">Contact</a>
        <!-- Ajoutez d'autres liens pour chaque tutoriel -->
    </div>

    
    <main>
        
        
        <section>
            <article>
                <h2>Tutoriel : Noeuds, Topics, Services et Actions</h2>

                <div class="table-of-contents">
                    <h3>Table des matières</h3>
                    <ul>
                        <li><a href="#section1">Introduction</a></li>
                        <li><a href="#section2">Noeuds, Topics, Services et Actions</a></li>
                        <li><a href="#section3">Lancer Turtlesim et contrôler la tortue avec le teleopkey</a></li>
                        <li><a href="#section4">Visualisation des noeuds et topics avec rqt graph</a></li>
                        <li><a href="#section5">Comprendre les topics avec Turtlesim</a></li>
                        <li><a href="#section6">Comprendre les topics avec TurtleSim et rqt</a></li>
                        <li><a href="#section7">Comprendre les actions avec Turtlesim</a></li>
                        <li><a href="#section8">Comprendre les services avec Turtlesim</a></li>
                    </ul>
                </div>

                <section id="section1">
                    <h3>Introduction</h3>
                    <p>Ce premier tutoriel a pour but d'apprendre à se servir de RO2 et de ses commandes de base à l'aide de l'outil 
                        turtlesim. Dans cette optique, nous allons dans un premier temps nous intéresser à ce que sont ROS2 et turtlesim.
                    </p>

                    <ul>
                        <li>
                            <p><strong>ROS2</strong> : ROS est un middleware (un software qui se comporte comme une passerelle entre des applications et 
                                des bases de données ou des systèmes d'exploitation, aussi appelé intergiciel en français). ROS2 est une 
                                nouvelle version de ROS, comportant à peu près les mêmes composants, mais dont l'architecture change 
                                fondamentalement. ROS2, tout comme ROS, possède une architecture basée sur le principe de systèmes en 
                                temps réel distribués/répartis. Cela signifie que l'architecture est composée de nœuds qui se chargent 
                                d'effectuer des calculs ou des opérations simples, reliés entre eux par un réseau en temps réel.
                            </p>
                            <p>La différence entre les deux vient du protocole réseau utilisé. ROS2 utilise un protocole réseau DDS (Data Distribution Service),
                                 qui a pour but de simplifier la programmation réseau. Chaque nœud créé avec ce protocole est à la fois un Publisher et un Subscriber 
                                 (voir la partie suivante pour plus de détails sur ce que sont les Publishers et Subscribers ), et est automatiquement créé sur une 
                                 fraction du sous-réseau auquel ROS2 a accès. Cette fraction est appelée domaine, et tous les nœuds d'un domaine sont connectés entre 
                                 eux lors de leurs créations. Cela rend à la fois la connexion à un réseau ROS2 plus facile, et plus sécuritaire, car la simple création 
                                 d'un nœud sur le réseau permet d'avoir accès à l'ensemble du réseau, mais il faut connaître à l'avance le sous-réseau ainsi que le 
                                 domaine sur lequel le réseau est situé.
                            </p>
                        </li>
                        <li>
                            <p><strong>Turtlesim</strong> : Turtlesim est un outil d'apprentissage créé pour ROS et ROS2 afin d'appréhender plus facilement leurs différents concepts. 
                                Cet outil se compose d'un espace sur lequel plusieurs tortues peuvent évoluer, et différents topics, services et actions (voir la 
                                partie suivante pour plus de détails sur ce que sont les topics, services et actions) sont accessibles afin de faire bouger ces 
                                tortues et récupérer les données disponibles. Bien que pouvant paraître simple, turtlesim permet d'avoir un premier contact avec 
                                l'ensemble des concepts de ROS et ROS2, sans risque d'abimer un système réel.
                            </p>
                        </li>
                    </ul>
                </section>

                <section id="section2">
                    <h3>Nœuds, Topics, Services et Actions</h3>
                    <p>Vous trouverez quelques définitions pour mieux comprendre le fonctionnement de ROS2 (quasiment identique à ROS) :</p>

                    <ul>
                        <li>
                            <p><strong><i>Nœuds</i></strong> : Un nœud est l'unité fondamentale de ROS2, et dont la tâche consiste la plupart du temps à réaliser une action spécifique. 
                                Ils peuvent être crées de diverses manières, mais leur fonctionnement reste similaire. 
                                Il en existe deux catégories principales : les nœuds "Publisher" et les nœuds "Subscriber". De ces deux catégories est née une troisième catégorie : 
                                les nœuds "Composed", qui sont composées d'un "Publisher" et d'un "Subscriber". 
                                Le rôle d'un « Publisher » est de fournir des informations à au moins un "Subscriber", et celui-ci choisit quelles informations doivent lui être 
                                envoyées avant d'attendre de les recevoir. Un "Subscriber" peut avoir souscrit à plusieurs "Publisher", et un "Publisher" peut fournir la même 
                                information à plusieurs "Subscriber".
                            </p>
                            <p>Les trois points suivants sont des interfaces permettant aux nœuds de communiquer entre eux. Chacun de ces types d'interface diffère 
                                des autres sur certains points. De plus, ils ont chacun leur domaine d'application.
                            </p><br>
                        </li>

                        <li>
                            <p><strong><i>Topics</i></strong> : Les topics sont des canaux de communication unidirectionnels qui relient entre eux les différents nœuds. Ils agissent comme une 
                                sorte de relayeur d'informations. Ils reçoivent chacun les informations d'un seul noeud Publisher et peuvent transmettre à plusieurs Subscriber. 
                                Ils permettent ainsi à plusieurs entités d'avoir accès à un même topic, mais l'information ne se transmets que dans un seul sens.
                                Un topic est donc dit asynchrone. Le "Publisher" ne sait pas exactement qui sont les "Subscriber" qui vont récupérer les informations 
                                transmises à ce topic. Les topics sont utilisées pour les flots de données continus, tel que des données de capteurs (position/vitesse/distance...).
                            </p><br>
                        </li>

                        <li>
                            <p><strong><i>Services</i></strong> : Les services sont des terminaux qui relient deux nœuds directement entre eux, et dont les informations peuvent être 
                                transmises dans les deux sens selon le système Request/Reply. Les services sont dit "<strong>synchrones</strong>". Ainsi, le nœud ayant effectué la demande,
                                 attends la réponse de la part du second nœud. Les services sont donc utilisés pour des procédures qui se terminent rapidement, comme des calculs rapides ou 
                                 la récupération de l'état d'un nœud. L'utilisation d'un service pour une procédure longue risque de bloquer les deux nœuds pour le temps de la procédure, et
                                  de générer des problèmes dans tous les autres nœuds qui pourraient être connectés à ceux-ci. Les services sont donc généralement utilisés pour récupérer 
                                  rapidement des données spécifiques.
                            </p><br>
                        </li>

                        <li>
                            <p><strong><i>Actions</i></strong> : Les actions ressemblent beaucoup à des services dans le sens où les actions utilisent également le système Request/Reply. 
                                La différence est qu'une action possède deux terminaux assimilés au nœuds : un client d'action (qui formule la requête) et un serveur d'action 
                                (qui réalise la tâche). Trois services et deux topics transitent entre ces deux nœuds :
                            </p>
                            <ul style="list-style-type: square;">
                                <li>
                                    <p><strong><i>Les services</i></strong> : <i>Send goal, Cancel goal, Get result</i>. Ils transitent du client d'action vers le serveur d'action.</p>
                                </li>
                                <li>
                                    <p><strong><i>Les topics</i></strong> : <i>Feedback</i> et <i>Status</i>. Ils transitent pour leur part dans le sens inverse aux services, 
                                        c'est-à-dire du serveur d'action vers le client d'action.
                                    </p>
                                </li>
                            </ul>

                            <p>L'action va donc consister en demandes d'objectifs par le nœud formulant la requête. Ces demandes seront transmises au serveur d'action. Celui-ci va alors 
                                envoyer de façon récurrente la progression de l'action ainsi que son statut au client d'action. Le client d'action peut alors choisir de demander l'annulation 
                                d'une action en cours ou bien de récupérer le statut final d'une action. Plusieurs actions peuvent être demandées à un même serveur d'action car chaque action 
                                possède son propre identifiant. Les actions servent donc à pallier le problème des services : ils seront utilisés pour des processus long mais nécessitant des 
                                retours sur sa progression de façon régulière. Elles sont donc principalement utilisées pour des actions réelles, tel que la mise en mouvement de robot.
                            </p><br>
                        </li>

                        <li>
                            <p><strong><i>Différence ROS et ROS2</i></strong> : Avec ROS, les nœuds établissent des communications entre eux en passant par un serveur (un ROS Master : terminal où 
                                on écrit la commande : \$ roscore). Dans ROS2 il n'y a plus de ROS master. La méthode de communication des nœuds a été modifiée afin que ces communications puissent 
                                se créer directement de nœud à nœud sans passer par un serveur (utilisation de la méthode pear-to-pear directement). ROS2 est donc un système à part de ROS, qui 
                                utilise un protocole de réseau DDS (Data Distribution Service) qui permet une sécurité et une fiabilité qui n'étaient pas le point fort des protocole TCP/IP 
                                (Transmission Control Protocol/Internet Protocol) et UDP/IP (User Datagram Protocol) modifiés utilisé par ROS et couplés au ROS master.
                            </p>
                            <p>En effet, le protocole DDS est bien plus sécuritaire que les protocoles UDP/IP ou TCP/IP, et l'absence de ROS master fait que l'ensemble du système ne repose 
                                plus sur le fonctionnement d'un seul élément. Il est cependant possible de lier des nœuds ROS2 à des nœuds ROS grâce à un pont qui permettent de recréer un 
                                système existant déjà sur ROS plus facilement. Ce système est pour le moment particulièrement utile car certains packages n'existent pas encore pour ROS2. 
                                Il suffit donc de créer un nœud ROS accédant au package et de le lier à un nœud ROS2 pour régler ce problème.
                            </p>
                        </li>
                    </ul>
                </section>


                <section id="section3">
                    <h3>Lancer Turtlesim et contrôler la tortue avec le teleopkey</h3>

                    <section id="subsection3-1">
                        <h4>Mise de la source dans le terminal</h4>
                        <ol>
                            <li>
                                <p>Ouvrez un terminal avec "<strong><i>ctrl+alt+T</i></strong>"</p>
                            </li>
                            <li>
                                <p>Indiquez à ce terminal le chemin des fichiers de configuration de ROS2. Cela vous permettra de pouvoir utiliser des fonctions de ROS2. 
                                    Voici la commande à taper dans le terminal :
                                </p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code1')">Copier</button>
<pre id="code1" class="code-content">
source /opt/ros/humble/setup.bash
</pre>
                                </div>

                                <img src="images/tuto_1/section3/source_ROS2.png" width="350px">
                                <p>Après avoir taper cette commande dans votre terminal, vous pourrez donc avoir accès à toutes les fonctions primaires de ROS2. Une autre méthode permet d'avoir 
                                    automatiquement tous les terminaux sourcés. Cette seconde méthode sera vu dans la section \hyperref[sub_sec:source .bashrc]{3.5}
                                </p>
                            </li>

                        </ol>
                    </section>

                    <section id="subsection3-2">
                        <h4>Lancer TurtleSim</h4>
                        <ol>
                            <li>
                                <p>Pour lancer TurtleSim, nous devons activer le nœud de TurtleSim. Pour ce faire nous devons utiliser une structure de commande particulière. Voici la structure à utiliser :</p>
                                <div class="code-block">
<pre class="code-content">
ros2 run &lt;package_name&gt; &lt;executable_name&gt;
</pre>
                                </div>
                                <p>Dans notre cas &lt;package_name&gt; sera l'application TurtleSim qui se nommera "turtlesim" et &lt;executable_name&gt; sera l'exécutable du nœud de TurtleSim qui sera "turtlesim_node".</p>
                            </li>

                            <li>
                                <p>Voici la commande à taper dans le terminal :</p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code2')">Copier</button>
<pre id="code2" class="code-content">
ros2 run turtlesim turtlesim_node
</pre>
                                </div>
                                <img src="images/tuto_1/section3/ros2 run turtlesim.png" width="350px">
                            </li>

                            <li>
                                <p>Une fenêtre « TurtleSim » va s'ouvrir :</p>
                                <img src="images/tuto_1/section3/turtlesim.png" width="600px">
                            </li>

                            <li>
                                <p>Plusieurs informations apparaissent dans le terminal :</p>
                                <ul style="list-style-type: '- ';">
                                    <li><p>TurtleSim a été démarré avec le nœud "/turtlesim"</p></li>
                                    <li><p>Une tortue a été créée avec le nom "turtle1"</p></li>
                                    <li><p>Et elle a été placée dans la fenêtre TurtleSim avec les coordonnées x,y et &theta; suivantes : x=5.54 ; y=5,54 et une orientation &theta;=0.00&deg;</p></li>
                                </ul>
                            </li>
                        </ol>
                    </section>

                    <section id="subsection3-3">
                        <h4>Lancer la télécommande</h4>
                        <p>Dans cette partie, nous allons voir comment lancer une télécommande qui nous permettra de faire bouger la tortue dans la fenêtre TurtleSim.</p>

                        <ol>
                            <li>
                                <p>Ouvrez un second terminal et tapez la commande pour ajouter la source à ce terminal.</p>
                            </li>
                            <li>
                                <p>Pour lancer la télécommande, nous devons lancer le nœud de la télécommande. Pour ce faire nous devons utiliser la structure de commande précédente.</p>
                                <p>Voici la structure :</p>
                                <div class="code-block">
<pre class="code-content">
ros2 run &lt;package_name&gt; &lt;executable_name&gt;
</pre>
                                </div>

                                <p>Dans notre cas &lt;package_name&gt; est TurtleSim qui se nommera "turtlesim" et &lt;executable_name&gt; est l'exécutable du nœud de la télécommande qui sera "turtle_teleop_key".</p>
                            </li>

                            <li>
                                <p>Voici, finalement, la commande à taper dans le 2nd terminal :</p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code3')">Copier</button>
<pre id="code3" class="code-content">
ros2 run turtlesim turtle_teleop_key
</pre>
                                </div>
                                <img src="images/tuto_1/section3/ros2 run turtlesim teleop.png" width="380px">
                                <p>Cela va démarrer la télécommande qui vous permettra de contrôler les mouvements de la tortue dans l'environnement Turtlesim en utilisant les touches du clavier.</p>
                            </li>

                            <li>
                                <p>Vous allez donc pouvoir contrôler la tortue avec les 4 flèches de votre clavier :</p>
                                <img src="images/tuto_1/section3/turtlesim et teleop.png" width="600px">
                                <p><i>Nous verrons dans un des prochains tutoriels à quoi correspondent les rotations vers les orientations absolue avec les  touches G,B,V,C,D,E,R et T.</i></p>
                            </li>
                        </ol>
                    </section>

                    <section id="subsection3-4">
                        <h4>Lancer TurtleSim et la télécommande dans le même terminal</h4>
                        <ol>
                            <li>
                                <p>Arrêtez la commande de de la télécommande Turtlesim dans le second terminal et aussi la commande de TurtleSim dans le premier terminal, en faisant un "<i>ctrl+C</i>" dans chaque terminal.</p>
                            </li>
                            <li>
                                <p>Fermez un des deux terminaux.</p>
                            </li>
                            <li>
                                <p>Sur le terminal qui vous reste, tapez la commande pour lancer le nœud de TurtleSim avec un "&" à la fin . Le "&" a pour but de faire fonctionner TurtleSim en arrière-plan dans ce terminal.</p>
                                <p id="cmd_turtlesim_arr_plan">Voici la commande :</p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code4')">Copier</button>
<pre id="code4" class="code-content">
ros2 run turtlesim turtlesim_node &
</pre>
                                </div>
                                <img src="images/tuto_1/section3/ros2 run turtlesim arriere plan.png" width="380px">
                                <p>Faites "<i>Entrer</i>" et vous constaterez que vous pouvez de nouveau utiliser ce terminal.</p>
                            </li>

                            <li>
                                <p>Tapez la commande pour avoir la télécommande teleop_key :</p>
                                <div class="code-block">
<button class="copy-button" onclick="copyCode('code5')">Copier</button>
<pre id="code5" class="code-content">
ros2 run turtlesim turtle_teleop_key
</pre>
                                </div>
                                <img src="images/tuto_1/section3/turtlesim et teleop 1 terminal.png" width="600px">

                            </li>
                            <p>Vous avez réussi à faire bouger votre tortue dans TurtleSim à l'aide de la télécommande en ayant lancé le noeuds de TurtleSim en arrière plan. 
                                La prochaine étape concerne la mise automatique de la source de RO2 pour chaque nouveau terminal ouvert.
                            </p>
                        </ol>
                        
                    </section>

                    <section id="subsection3-5">
                        <h4>Mise de la source dans fichier ~/.bashrc</h4>
                        <p></p>
                    </section>

                </section>


                <section id="section4">
                    <h3>Visualisation des nœuds et topics avec rqt graph</h3>
                    <p>Contenu de la section 1...</p>

                    <!-- Sous-section avec titre h4 -->
                    <section id="subsection4-1">
                        <h4>Ouvrir rqt_graph</h4>
                        <p></p>
                    </section>

                    <section id="subsection4-1">
                        <h4>Lancer TurtleSim</h4>
                        <p></p>
                    </section>

                    <section id="subsection4-1">
                        <h4>Lancer la télécommande</h4>
                        <p></p>
                    </section>
                
                </section>


                <section id="section5">
                    <h3>Comprendre les topics avec TurtleSim</h3>
                    <p>Contenu de la section 1...</p>

                    <section id="subsection5-1">
                        <h4>Trouver la liste des "topics" actifs</h4>
                        <p></p>
                    </section>

                    <section id="subsection5-2">
                        <h4>Trouver les informations précises d'un "topic"</h4>
                        <p></p>
                    </section>

                    <section id="subsection5-3">
                        <h4>Trouver les caractéristiques d'un "geometry_msgs/msg/Twist"</h4>
                        <p></p>
                    </section>

                    <section id="subsection5-4">
                        <h4>Envoyer un geometry_msgs/msg/Twist sur le topic /turtle1/cmd_vel</h4>
                        <p></p>
                    </section>

                    <section id="subsection5-5">
                        <h4>Envoyer un message en boucle sur le topic /turtle1/cmd_vel</h4>
                        <p></p>
                    </section>

                </section>


                <section id="section6">
                    <h3>Comprendre les topics avec TurtleSim et rqt</h3>
                    <p>Contenu de la section 1...</p>

                    <section id="subsection6-1">
                        <h4>Ouvrir rqt</h4>
                        <p></p>
                    </section>

                    <section id="subsection6-2">
                        <h4>Lancer TurtleSim</h4>
                        <p></p>
                    </section>

                    <section id="subsection6-3">
                        <h4>Envoyer un geometry_msgs/msg/Twist sur le topic /turtle1/cmd_vel avec rqt</h4>
                        <p></p>
                    </section>

                    <section id="subsection6-4">
                        <h4>Envoyer un geometry_msgs/msg/Twist en boucle avec rqt</h4>
                        <p></p>
                    </section>

                </section>


                <section id="section7">
                    <h3>Comprendre les actions avec TurtleSim</h3>
                    <p>Contenu de la section 1...</p>

                    <section id="subsection7-1">
                        <h4>Découvrir les actions</h4>
                        <p></p>
                    </section>

                    <section id="subsection7-2">
                        <h4>Trouver la liste des "Action Servers" et "Action Clients" d'un noeud</h4>
                        <p></p>
                    </section>

                    <section id="subsection7-3">
                        <h4>Trouver la liste des actions disponibles et leurs informations</h4>
                        <p></p>
                    </section>

                    <section id="subsection7-4">
                        <h4>Visualisation de l'action /turtle1/rotate_absolute avec rqt_graph</h4>
                        <p></p>
                    </section>

                    <section id="subsection7-5">
                        <h4>Trouver la structure du type d'action "turtlesim/action/RotateAbsolute"</h4>
                        <p></p>
                    </section>

                    <section id="subsection7-6">
                        <h4>Envoyer un objectif à une action en ligne de commande</h4>
                        <p></p>
                    </section>

                </section>


                <section id="section8">
                    <h3>Comprendre les services avec TurtleSim</h3>
                    <p>Contenu de la section 1...</p>

                    <section id="subsection8-1">
                        <h4>Découvrir les services</h4>
                        <p></p>
                    </section>

                    <section id="subsection8-2">
                        <h4>Trouver le type d'un service</h4>
                        <p></p>
                    </section>

                    <section id="subsection8-3">
                        <h4>Trouver tous les services actifs du même type</h4>
                        <p></p>
                    </section>

                    <section id="subsection8-4">
                        <h4>Trouver la structure du type de service</h4>
                        <p></p>
                    </section>

                    <section id="subsection8-5">
                        <h4>Appeler un service</h4>
                        <p></p>
                    </section>

                    <section id="subsection8-6">
                        <h4>Faire spawn une nouvelle tortue dans TurtleSim</h4>
                        <p></p>
                    </section>

                </section>


            </article>
            <!-- Ajoutez d'autres articles pour chaque tutoriel -->
        </section>
    </main>
    
    <script>
        // Fonction pour copier le contenu du bloc de code
        function copyCode(id) {
            const codeBlock = document.getElementById(id);
            const range = document.createRange();
            range.selectNode(codeBlock);
            window.getSelection().removeAllRanges();
            window.getSelection().addRange(range);
            document.execCommand("copy");
            window.getSelection().removeAllRanges();
        }

        // Script pour gérer l'affichage du menu
        var nav = document.querySelector('nav');
        var menuButton = document.getElementById('menu-button');
        var menuDropdown = document.getElementById('menu-dropdown');

        menuButton.addEventListener('click', function() {
            // Toggle la visibilité du menu déroulant
            menuDropdown.style.display = (menuDropdown.style.display === 'block') ? 'none' : 'block';
        });
    </script>
</body>
</html>